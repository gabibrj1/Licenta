<div class="forum-category-container">
    <!-- Breadcrumbs -->
    <div class="forum-breadcrumbs">
      <a routerLink="/menu">Acasă</a>
      <span class="separator">/</span>
      <a routerLink="/menu/forumuri">Forum</a>
      <span class="separator">/</span>
      <span class="current">{{ category?.name || 'Categorie' }}</span>
    </div>
    
    <!-- Header categorie -->
    <div *ngIf="category" class="category-header">
      <div class="category-icon" [style.background-color]="category.color + '22'" [style.color]="category.color">
        <svg viewBox="0 0 24 24" width="28" height="28">
          <use [attr.href]="'#icon-' + (category.icon?.substring(3) || 'comments')"></use>
        </svg>
      </div>
      
      <div class="category-details">
        <h1>{{ category.name }}</h1>
        <p>{{ category.description }}</p>
      </div>
      
      <button class="btn-new-topic" (click)="createNewTopic()">
        <i class="fa fa-plus-circle"></i> Subiect nou
      </button>
    </div>
    
    <!-- Loading state -->
    <div *ngIf="loading" class="loading-spinner">
      <div class="spinner"></div>
      <p>Se încarcă subiectele...</p>
    </div>
    
    <!-- Error state -->
    <div *ngIf="error && !loading" class="error-message">
      <i class="fa fa-exclamation-triangle"></i>
      <p>Nu s-au putut încărca subiectele. Vă rugăm să încercați din nou mai târziu.</p>
      <button class="btn-retry" (click)="loadTopics()">Reîncarcă</button>
    </div>
    
    <!-- Lista de subiecte -->
    <div *ngIf="!loading && !error && topics.length > 0" class="topic-list-container">
      <!-- Toolbar cu opțiuni de sortare -->
      <div class="topic-toolbar">
        <div class="topic-count">
          {{ totalTopics }} subiecte în această categorie
        </div>
        
        <div class="sort-options">
          <span>Sortare după:</span>
          <select [ngModel]="currentSort" (ngModelChange)="sortTopics($event)">
            <option *ngFor="let option of sortOptions" [value]="option.value">{{ option.label }}</option>
          </select>
        </div>
      </div>
      
      <!-- Lista de subiecte -->
      <div class="topic-list">
        <div class="topic-header">
          <div class="topic-title-header">Subiect</div>
          <div class="topic-stats-header">Statistici</div>
          <div class="topic-last-post-header">Ultima postare</div>
        </div>
        
        <div *ngFor="let topic of topics" class="topic-item" [class.pinned]="topic.is_pinned" [class.closed]="topic.is_closed" (click)="navigateToTopic(topic.id, topic.slug)">
          <div class="topic-status">
            <div *ngIf="topic.is_pinned" class="status-icon pinned" title="Subiect fixat">
              <svg viewBox="0 0 24 24" width="16" height="16">
                <use href="#icon-pin"></use>
              </svg>
            </div>
            <div *ngIf="topic.is_closed" class="status-icon closed" title="Subiect închis">
              <svg viewBox="0 0 24 24" width="16" height="16">
                <use href="#icon-lock"></use>
              </svg>
            </div>
          </div>
          
          <div class="topic-info">
            <h3 class="topic-title">{{ topic.title }}</h3>
            <div class="topic-meta">
              <div class="topic-author">
                <img [src]="getUserAvatar(topic.author.email)" alt="Avatar" class="author-avatar">
                <span>{{ topic.author.full_name || topic.author.email }}</span>
              </div>
              <div class="topic-date">{{ getTimeAgo(topic.created_at) }}</div>
            </div>
          </div>
          
          <div class="topic-stats">
            <div class="stat-item">
              <svg viewBox="0 0 24 24" width="16" height="16">
                <use href="#icon-eye"></use>
              </svg>
              <span>{{ topic.views_count }}</span> vizualizări
            </div>
            <div class="stat-item">
              <svg viewBox="0 0 24 24" width="16" height="16">
                <use href="#icon-message"></use>
              </svg>
              <span>{{ topic.post_count - 1 }}</span> răspunsuri
            </div>
          </div>
          
          <div class="topic-last-post" *ngIf="topic.last_post_author">
            <div class="last-post-date">{{ getTimeAgo(topic.last_activity) }}</div>
            <div class="last-post-author">
              <img [src]="getUserAvatar(topic.last_post_author.email)" alt="Avatar" class="author-avatar-small">
              <span>{{ topic.last_post_author.full_name || topic.last_post_author.email }}</span>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Paginație -->
      <div *ngIf="totalPages > 1" class="pagination">
        <button class="btn-page prev" [disabled]="currentPage === 1" (click)="prevPage()">
          &laquo; Anterior
        </button>
        
        <div class="page-numbers">
          <button *ngFor="let page of getPagination()" 
                  class="btn-page" 
                  [class.active]="page === currentPage"
                  (click)="goToPage(page)">
            {{ page }}
          </button>
        </div>
        
        <button class="btn-page next" [disabled]="currentPage === totalPages" (click)="nextPage()">
          Următor &raquo;
        </button>
      </div>
    </div>
    
    <!-- Empty state -->
    <div *ngIf="!loading && !error && topics.length === 0" class="empty-state">
      <i class="fa fa-comments-o"></i>
      <p>Nu există subiecte în această categorie.</p>
      <button class="btn-new-topic" (click)="createNewTopic()">
        <i class="fa fa-plus-circle"></i> Creează primul subiect
      </button>
    </div>
  </div>
  
  <!-- SVG Icons - importate din forumuri.component -->
  <div class="svg-icons" style="display: none;">
    <!-- Diverse iconițe pentru forum -->
    <svg id="icon-eye" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
      <path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" />
    </svg>
    
    <svg id="icon-message" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
      <path fill="currentColor" d="M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M20,16H6L4,18V4H20" />
    </svg>
    
    <svg id="icon-pin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
      <path fill="currentColor" d="M16,12V4H17V2H7V4H8V12L6,14V16H11.2V22H12.8V16H18V14L16,12Z" />
    </svg>
    
    <svg id="icon-lock" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
      <path fill="currentColor" d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z" />
    </svg>
    
    <!-- Icon pentru categoria Anunțuri -->
    <svg id="icon-bullhorn" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
      <path fill="currentColor" d="M12,8H4A2,2 0 0,0 2,10V14A2,2 0 0,0 4,16H5V20A1,1 0 0,0 6,21H8A1,1 0 0,0 9,20V16H12L17,20V4L12,8M21.5,12C21.5,13.71 20.54,15.26 19,16V8C20.53,8.75 21.5,10.3 21.5,12Z" />
    </svg>
    
    <!-- Icon pentru categoria Sisteme de Vot -->
    <svg id="icon-check-square" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
        <path fill="currentColor" d="M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V5H19V19M17,17H7V7H17V17M15,15H9V9H15V15M13,11H11V13H13V11Z" />
    </svg>
    
    <!-- Icon pentru categoria Securitate -->
    <svg id="icon-shield-alt" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
        <path fill="currentColor" d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,5A3,3 0 0,1 15,8A3,3 0 0,1 12,11A3,3 0 0,1 9,8A3,3 0 0,1 12,5M17.13,17C15.92,18.85 14.11,20.24 12,20.92C9.89,20.24 8.08,18.85 6.87,17C6.53,16.5 6.24,16 6,15.47C6,13.82 8.71,12.47 12,12.47C15.29,12.47 18,13.79 18,15.47C17.76,16 17.47,16.5 17.13,17Z" />
    </svg>
    
    <!-- Icon pentru categoria Întrebări -->
    <svg id="icon-question-circle" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
        <path fill="currentColor" d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,17A1,1 0 0,1 11,16A1,1 0 0,1 12,15A1,1 0 0,1 13,16A1,1 0 0,1 12,17M13.07,9.25L12.17,10.17C11.45,10.89 11,11.5 11,13H10V12.5C10,11.39 10.45,10.39 11.17,9.67L12.41,8.41C12.78,8.05 13,7.55 13,7A2,2 0 0,0 11,5A2,2 0 0,0 9,7H8A3,3 0 0,1 11,4A3,3 0 0,1 14,7C14,7.88 13.64,8.67 13.07,9.25Z" />
    </svg>
    
    <!-- Icon pentru categoria Feedback -->
    <svg id="icon-comment-dots" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
        <path fill="currentColor" d="M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M6,9H18V11H6M14,14H6V12H14M18,8H6V6H18" />
    </svg>
    
    <!-- Icon pentru categoria Experiențe -->
    <svg id="icon-user-check" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
      <path fill="currentColor" d="M21.1,12.5L22.5,13.91L15.97,20.5L12.5,17L13.9,15.59L15.97,17.67L21.1,12.5M10,17L3,17V13C3,9.8 7.6,8 10,8C10.4,8 10.8,8.04 11.21,8.11C8.56,9.39 7,11.73 7,13C7,15.21 9.06,16 11,16C11.29,16 11.5,16 11.77,15.93C10.92,16.58 9.2,17 10,17M10,4A4,4 0 0,1 14,8A4,4 0 0,1 10,12A4,4 0 0,1 6,8A4,4 0 0,1 10,4Z" />
    </svg>
    
    <!-- Icon pentru categoria Discuții Generale -->
    <svg id="icon-comments" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
      <path fill="currentColor" d="M12,23A1,1 0 0,1 11,22V19H7A2,2 0 0,1 5,17V7A2,2 0 0,1 7,5H21A2,2 0 0,1 23,7V17A2,2 0 0,1 21,19H16.9L13.2,22.71C13,22.89 12.76,23 12.5,23H12M3,15H1V3A2,2 0 0,1 3,1H17V3H3V15Z" />
    </svg>